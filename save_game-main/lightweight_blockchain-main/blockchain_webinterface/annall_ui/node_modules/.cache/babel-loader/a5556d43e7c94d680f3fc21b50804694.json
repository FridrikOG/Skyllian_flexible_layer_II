{"ast":null,"code":"var _jsxFileName = \"/Users/heidifjeldelima/Documents/GitHub/save_game/lightweight_blockchain-main/blockchain_webinterface/annall_ui/src/components/User/index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useNavigate, Redirect } from \"react-router-dom\";\nimport userService from \"../../services/userService\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst UserRegister = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n  let registerItems = JSON.parse(localStorage.getItem(\"registerForm\"));\n  console.log(\"Register items \", registerItems);\n\n  if (registerItems === null) {\n    let registerItems = {\n      username: \"\",\n      displayName: \"\",\n      userPassword: \"\"\n    };\n    localStorage.setItem(\"registerForm\", JSON.stringify(registerItems));\n  }\n\n  const [username, setUserName] = useState(registerItems.username);\n  const [displayName, setDisplayName] = useState(registerItems.displayName);\n  const [userPassword, setPassword] = useState(registerItems.userPassword);\n  const [serverError, setServerError] = useState(\"\");\n  const [errors, setErrors] = useState({\n    name: \"\",\n    displayName: \"\",\n    userPassword: \"\",\n    serverError: \"\"\n  });\n  const [success, setSuccess] = useState(false);\n\n  const validate = () => {\n    let isValid = true;\n    const le = {\n      username: \"\",\n      displayName: \"\",\n      userPassword: \"\"\n    }; // length of 3\n\n    if (username.length < 3) {\n      le[\"username\"] = \" can't be empty\";\n      isValid = false;\n    } // length of 3\n\n\n    if (displayName.length < 3) {\n      le[\"displayName\"] = \" can't be empty\";\n      isValid = false;\n    } // userPassword must be at least 8\n\n\n    if (userPassword.length < 8) {\n      le[\"userPassword\"] = \" should be at least 8 in length\";\n      isValid = false;\n    }\n\n    setErrors(le);\n    return isValid;\n  };\n\n  useEffect(() => {\n    const user = JSON.parse(localStorage.getItem(\"user\"));\n    const isAuth = true;\n\n    if (user != null) {\n      navigate(\"/dashboard\");\n    }\n\n    const registerForm = {\n      username,\n      displayName,\n      userPassword\n    };\n    if (!username || !userPassword || !displayName) // storing new cart\n      localStorage.removeItem(\"registerForm\");\n    localStorage.setItem(\"registerForm\", JSON.stringify(registerForm));\n  });\n\n  const handleOnSubmit = async e => {\n    // Send to server\n    e.preventDefault(); // If error then we don't dispatch\n\n    if (!validate(username, displayName, userPassword)) return;\n    const res = await dispatch(userService().register(username, displayName, userPassword));\n\n    if (!res) {\n      setServerError(\"Server error\");\n    } else {\n      navigate(\"/user/login\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: success ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" You are logged in now as \", username, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Register!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          action: \"\",\n          method: \"get\",\n          onSubmit: e => handleOnSubmit(e),\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"username\", errors.name, /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: username,\n              name: \"username\",\n              onChange: e => setUserName(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"displayName\", errors.displayName, /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: displayName,\n              name: \"username\",\n              onChange: e => setDisplayName(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"userPassword\", errors.userPassword, /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: userPassword,\n              name: \"userPassword\",\n              onChange: e => setPassword(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: \"sign up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\" \", serverError, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/user/login\",\n      className: \"nav-link\",\n      children: \"I have an account\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(UserRegister, \"GlMeb6/GB7MJIt/JmycoYX5Tpnc=\", false, function () {\n  return [useDispatch, useNavigate];\n});\n\n_c = UserRegister;\nexport default UserRegister;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserRegister\");","map":{"version":3,"sources":["/Users/heidifjeldelima/Documents/GitHub/save_game/lightweight_blockchain-main/blockchain_webinterface/annall_ui/src/components/User/index.jsx"],"names":["React","useState","useEffect","useDispatch","useNavigate","Redirect","userService","Link","UserRegister","dispatch","loading","setLoading","navigate","registerItems","JSON","parse","localStorage","getItem","console","log","username","displayName","userPassword","setItem","stringify","setUserName","setDisplayName","setPassword","serverError","setServerError","errors","setErrors","name","success","setSuccess","validate","isValid","le","length","user","isAuth","registerForm","removeItem","handleOnSubmit","e","preventDefault","res","register","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useNavigate, Redirect } from \"react-router-dom\";\nimport userService from \"../../services/userService\";\nimport { Link } from \"react-router-dom\";\n\nconst UserRegister = () => {\n  const dispatch = useDispatch();\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n  let registerItems = JSON.parse(localStorage.getItem(\"registerForm\"));\n  console.log(\"Register items \", registerItems);\n  if (registerItems === null) {\n    let registerItems = {\n      username: \"\",\n      displayName: \"\",\n      userPassword: \"\",\n    };\n    localStorage.setItem(\"registerForm\", JSON.stringify(registerItems));\n  }\n\n  const [username, setUserName] = useState(registerItems.username);\n  const [displayName, setDisplayName] = useState(registerItems.displayName);\n  const [userPassword, setPassword] = useState(registerItems.userPassword);\n  const [serverError, setServerError] = useState(\"\");\n  const [errors, setErrors] = useState({\n    name: \"\",\n    displayName: \"\",\n    userPassword: \"\",\n    serverError: \"\",\n  });\n  const [success, setSuccess] = useState(false);\n\n  const validate = () => {\n    let isValid = true;\n    const le = { username: \"\", displayName: \"\", userPassword: \"\" };\n    // length of 3\n    if (username.length < 3) {\n      le[\"username\"] = \" can't be empty\";\n      isValid = false;\n    }\n    // length of 3\n    if (displayName.length < 3) {\n      le[\"displayName\"] = \" can't be empty\";\n      isValid = false;\n    }\n    // userPassword must be at least 8\n    if (userPassword.length < 8) {\n      le[\"userPassword\"] = \" should be at least 8 in length\";\n      isValid = false;\n    }\n    setErrors(le);\n    return isValid;\n  };\n  useEffect(() => {\n    const user = JSON.parse(localStorage.getItem(\"user\"));\n    const isAuth = true;\n    if (user != null) {\n      navigate(\"/dashboard\");\n    }\n    const registerForm = {\n      username,\n      displayName,\n      userPassword,\n    };\n    if (!username || !userPassword || !displayName)\n      // storing new cart\n      localStorage.removeItem(\"registerForm\");\n    localStorage.setItem(\"registerForm\", JSON.stringify(registerForm));\n  });\n\n  const handleOnSubmit = async (e) => {\n    // Send to server\n    e.preventDefault();\n    // If error then we don't dispatch\n    if (!validate(username, displayName, userPassword)) return;\n\n    const res = await dispatch(\n      userService().register(username, displayName, userPassword)\n    );\n    if (!res) {\n      setServerError(\"Server error\");\n    } else {\n      navigate(\"/user/login\");\n    }\n  };\n  return (\n    <>\n      <div>\n        {success ? (\n          <div> You are logged in now as {username} </div>\n        ) : (\n          <div>\n            <h1>Register!</h1>\n            <form action=\"\" method=\"get\" onSubmit={(e) => handleOnSubmit(e)}>\n              <label>\n                username\n                {errors.name}\n                <input\n                  type=\"text\"\n                  value={username}\n                  name=\"username\"\n                  onChange={(e) => setUserName(e.target.value)}\n                />\n              </label>\n              <label>\n                displayName\n                {errors.displayName}\n                <input\n                  type=\"text\"\n                  value={displayName}\n                  name=\"username\"\n                  onChange={(e) => setDisplayName(e.target.value)}\n                />\n              </label>\n              <label>\n                userPassword\n                {errors.userPassword}\n                <input\n                  type=\"text\"\n                  value={userPassword}\n                  name=\"userPassword\"\n                  onChange={(e) => setPassword(e.target.value)}\n                />\n              </label>\n              <button type=\"submit\">sign up</button>\n              <div> {serverError} </div>\n            </form>\n          </div>\n        )}\n      </div>\n      <Link to=\"/user/login\" className=\"nav-link\">\n        I have an account\n      </Link>\n    </>\n  );\n};\n\nexport default UserRegister;\n"]},"metadata":{},"sourceType":"module"}